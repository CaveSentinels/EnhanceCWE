{% extends "admin/change_form.html" %}
{% load muo_extras %}

{% block extrahead %}
    {{ block.super }}
    <script type="text/javascript">
    jQuery(function ($) {
        if (document.getElementById('id_choice')) {
            if ($('#id_choice_0').is(':checked')) {
                // Misuse case field should be shown
                show_misuse_case()
            }
            else {
                // New Misuse Case field should be shown
                show_new_misuse_case()
            }
        }

        $('#id_choice_0').click(function(e) {
            show_misuse_case()
        });

        $('#id_choice_1').click(function(e) {
            show_new_misuse_case()
        });

    });

    function show_misuse_case() {
        $('.field-new_misuse_case').hide();
        $('.field-misuse_case').show();
    }

    function show_new_misuse_case() {
        $('.field-new_misuse_case').show();
        $('.field-misuse_case').hide();
    }

</script>
{% endblock %}


{# Priting the rejection reason at the top of the form#}
{% block form_top %}
{% if original.status == 'rejected' %}
    {# if in rejected status, print in error alert#}
    <div class="alert alert-error"><strong>
        This MUO has been rejected
        {% if original.reject_reason %}
            : {{ original.reject_reason }}
        {% endif %}
    </strong></div>

{% elif original.reject_reason and original.status != 'rejected' and original.status != 'approved' %}
    {# if in approved state, don't print reject message. Else, print in warning alert#}
    <div class="alert alert-warning">
        This MUO used to be rejected: {{ original.reject_reason }}
    </div>
{% endif %}
{% endblock %}

{% block submit_buttons_bottom %}
    {% muo_submit_row %}
{% endblock %}





